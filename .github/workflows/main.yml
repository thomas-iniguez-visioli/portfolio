name: Build Vue
on: 
 workflow_dispatch:
 push:
 schedule:
    # * is a special character in YAML so you have to quote this string
    - cron:  '*/30 * * * *'
 issues:
   types:
     - closed
permissions:
  actions: write
  attestations: write
  checks: write
  contents: write
  deployments: write
  id-token: write
  issues: write
  discussions: write
  packages: write
  pages: write
  pull-requests: write
  repository-projects: write
  security-events: write
  statuses: write

jobs:
  build_vue:
    
    
    runs-on: windows-latest
    name: Build Vue
    steps:
    - uses: actions/checkout@v4
      with:
          persist-credentials: false
    - name: Setup Python
      uses: actions/setup-python@v5.3.0
    - name: install new module 
      env: 
        GITHUB_TOKEN: ${{ secrets.TOKEN }}
      run: |
          npm install -D vite-vue-md 
          npm i
          npm run build
   
    # Leave this line unchanged
    - name: run create/update pull request
      uses: gr2m/create-or-update-pull-request-action@v1.10.0 # Create a PR or update the Action's existing PR
      env: 
        GITHUB_TOKEN: ${{ secrets.TOKEN }}
      with:
          author: "alphaleadership thomas.iniguez@free.fr"
          body: >
            Here's a new weekly retro, automatically generated with
            GitHub Actions and `@retrogen/generate`.
          branch: retrogen  # Custom branch *just* for this Action.
          commit-message: 'doc: generate weekly retro'
          title: 'doc: generate weekly retro'
          assignees: bnb # change to whoever you want to be assigned to this PR
          auto-merge: squash
   
