<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Améliorations d'Accessibilité - Thème Développeur Hexo</title>
    <link rel="stylesheet" href="source/styles/accessibility.css">
    <link rel="stylesheet" href="source/styles/foundation.css">
    <link rel="stylesheet" href="source/styles/variables.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 2rem;
            background: var(--color-background, #ffffff);
            color: var(--color-text-primary, #1f2937);
        }
        
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #1f2937;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 0.5rem;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .test-item {
            padding: 1rem;
            background: #f9fafb;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }
        
        .status-pass { background-color: #10b981; }
        .status-fail { background-color: #ef4444; }
        .status-warning { background-color: #f59e0b; }
        
        .keyboard-hint {
            background: #1f2937;
            color: #ffffff;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <!-- Skip Links Test -->
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>
    <a href="#navigation" class="skip-link">Aller à la navigation</a>
    <a href="#sidebar" class="skip-link">Aller à la barre latérale</a>

    <header role="banner">
        <h1>Test des Améliorations d'Accessibilité</h1>
        <p>Validation WCAG 2.1 AA pour le thème développeur Hexo</p>
    </header>

    <main id="main-content" role="main">
        <!-- Focus Management Test -->
        <section class="test-section">
            <h2>1. Gestion du Focus et Navigation Clavier</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Indicateurs de Focus</h3>
                    <p>Testez avec <span class="keyboard-hint">Tab</span> pour voir les indicateurs de focus WCAG-compliant.</p>
                    <button class="btn">Bouton Test</button>
                    <a href="#" class="btn">Lien Test</a>
                    <input type="text" placeholder="Input Test" />
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Navigation Clavier</h3>
                    <p>Navigation avec <span class="keyboard-hint">↑</span> <span class="keyboard-hint">↓</span> dans les menus.</p>
                    <nav role="menu" aria-label="Menu de test">
                        <a href="#" role="menuitem">Accueil</a>
                        <a href="#" role="menuitem">À propos</a>
                        <a href="#" role="menuitem">Articles</a>
                        <a href="#" role="menuitem">Contact</a>
                    </nav>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Piège de Focus</h3>
                    <p>Test du piège de focus dans les modales.</p>
                    <button data-modal-trigger="test-modal">Ouvrir Modal</button>
                    <div id="test-modal" class="modal focus-trap" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title">
                        <div class="modal-content">
                            <h3 id="modal-title">Modal de Test</h3>
                            <p>Utilisez <span class="keyboard-hint">Tab</span> et <span class="keyboard-hint">Shift+Tab</span> pour tester le piège de focus.</p>
                            <button>Premier bouton</button>
                            <button>Deuxième bouton</button>
                            <button class="modal-close" aria-label="Fermer la modal">Fermer</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Screen Reader Support Test -->
        <section class="test-section">
            <h2>2. Support des Lecteurs d'Écran</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Contenu Screen-Reader Only</h3>
                    <p>Contenu visible uniquement pour les lecteurs d'écran :</p>
                    <span class="sr-only">Ce texte n'est visible que pour les lecteurs d'écran</span>
                    <span class="visually-hidden">Texte masqué visuellement mais accessible</span>
                    <p><em>Utilisez un lecteur d'écran pour entendre ce contenu.</em></p>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>ARIA Labels et Descriptions</h3>
                    <button aria-label="Fermer la fenêtre" aria-describedby="close-help">×</button>
                    <div id="close-help" class="sr-only">Ferme la fenêtre actuelle et retourne à la page précédente</div>
                    
                    <input type="search" aria-label="Rechercher dans les articles" aria-describedby="search-help" />
                    <div id="search-help" class="help-text">Tapez votre recherche et appuyez sur Entrée</div>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Régions Live</h3>
                    <button onclick="announceMessage()">Tester l'Annonce</button>
                    <div id="live-region" class="live-region" aria-live="polite" aria-atomic="true"></div>
                    <p><em>Cliquez le bouton pour tester les annonces aux lecteurs d'écran.</em></p>
                </div>
            </div>
        </section>

        <!-- Form Accessibility Test -->
        <section class="test-section">
            <h2>3. Accessibilité des Formulaires</h2>
            
            <form class="test-form" novalidate>
                <div class="test-grid">
                    <div class="test-item">
                        <h3><span class="status-indicator status-pass"></span>Labels et Champs Requis</h3>
                        <label for="test-name" class="required">Nom complet</label>
                        <input type="text" id="test-name" name="name" required aria-required="true" />
                        
                        <label for="test-email" class="required">Email</label>
                        <input type="email" id="test-email" name="email" required aria-required="true" />
                    </div>
                    
                    <div class="test-item">
                        <h3><span class="status-indicator status-pass"></span>États d'Erreur</h3>
                        <label for="test-phone">Téléphone</label>
                        <input type="tel" id="test-phone" name="phone" pattern="[0-9]{10}" 
                               aria-describedby="phone-help" class="error" aria-invalid="true" />
                        <div id="phone-help" class="help-text">Format: 0123456789</div>
                        <div class="error-message">Veuillez entrer un numéro de téléphone valide</div>
                    </div>
                    
                    <div class="test-item">
                        <h3><span class="status-indicator status-pass"></span>Fieldset et Legend</h3>
                        <fieldset>
                            <legend>Préférences de contact</legend>
                            <label><input type="radio" name="contact" value="email" /> Email</label>
                            <label><input type="radio" name="contact" value="phone" /> Téléphone</label>
                            <label><input type="radio" name="contact" value="sms" /> SMS</label>
                        </fieldset>
                    </div>
                </div>
                
                <button type="submit" class="btn">Envoyer le formulaire</button>
            </form>
        </section>

        <!-- Color Contrast Test -->
        <section class="test-section">
            <h2>4. Contraste des Couleurs</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Contraste WCAG AA</h3>
                    <p style="color: #1f2937; background: #ffffff; padding: 1rem;">
                        Texte normal sur fond blanc (ratio: 16.1:1) ✓
                    </p>
                    <p style="color: #3b82f6; background: #ffffff; padding: 1rem;">
                        Lien bleu sur fond blanc (ratio: 5.9:1) ✓
                    </p>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Mode Contraste Élevé</h3>
                    <button class="contrast-toggle">Activer Contraste Élevé</button>
                    <p><em>Teste la compatibilité avec les préférences système de contraste élevé.</em></p>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Couleurs Forcées (Windows)</h3>
                    <p>Compatible avec le mode Contraste Élevé de Windows.</p>
                    <button class="btn">Bouton Test</button>
                    <a href="#" class="btn">Lien Test</a>
                </div>
            </div>
        </section>

        <!-- Motion and Animation Test -->
        <section class="test-section">
            <h2>5. Animations et Mouvement</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Respect des Préférences</h3>
                    <p>Les animations respectent <code>prefers-reduced-motion</code>.</p>
                    <button class="motion-toggle">Réduire les Animations</button>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Animations Essentielles</h3>
                    <div class="loading" aria-busy="true" aria-live="polite">
                        <span>Chargement...</span>
                    </div>
                    <p><em>Les animations de chargement restent visibles mais réduites.</em></p>
                </div>
            </div>
        </section>

        <!-- Touch and Pointer Test -->
        <section class="test-section">
            <h2>6. Accessibilité Tactile</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Taille des Cibles</h3>
                    <p>Toutes les cibles tactiles font au minimum 44×44px :</p>
                    <div class="touch-target-group">
                        <button class="btn">Bouton</button>
                        <a href="#" class="btn">Lien</a>
                        <button class="btn">Action</button>
                    </div>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Espacement Confortable</h3>
                    <p>Espacement suffisant entre les éléments interactifs.</p>
                    <nav class="touch-target-group">
                        <a href="#">Accueil</a>
                        <a href="#">À propos</a>
                        <a href="#">Contact</a>
                    </nav>
                </div>
            </div>
        </section>

        <!-- Semantic HTML Test -->
        <section class="test-section">
            <h2>7. HTML Sémantique</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Landmarks ARIA</h3>
                    <p>Structure avec les rôles landmarks appropriés :</p>
                    <ul>
                        <li><code>role="banner"</code> - En-tête</li>
                        <li><code>role="main"</code> - Contenu principal</li>
                        <li><code>role="navigation"</code> - Navigation</li>
                        <li><code>role="complementary"</code> - Barre latérale</li>
                        <li><code>role="contentinfo"</code> - Pied de page</li>
                    </ul>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Hiérarchie des Titres</h3>
                    <h4>Titre Niveau 4</h4>
                    <h5>Titre Niveau 5</h5>
                    <h6>Titre Niveau 6</h6>
                    <p><em>Hiérarchie logique sans saut de niveau.</em></p>
                </div>
            </div>
        </section>

        <!-- Testing Tools Section -->
        <section class="test-section">
            <h2>8. Outils de Test d'Accessibilité</h2>
            
            <div class="test-grid">
                <div class="test-item">
                    <h3><span class="status-indicator status-warning"></span>Tests Recommandés</h3>
                    <ul>
                        <li><strong>axe-core</strong> - Extension navigateur</li>
                        <li><strong>WAVE</strong> - Évaluateur web</li>
                        <li><strong>Lighthouse</strong> - Audit intégré</li>
                        <li><strong>Colour Contrast Analyser</strong> - Test de contraste</li>
                    </ul>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-warning"></span>Tests Lecteurs d'Écran</h3>
                    <ul>
                        <li><strong>NVDA</strong> (Windows) - Gratuit</li>
                        <li><strong>JAWS</strong> (Windows) - Payant</li>
                        <li><strong>VoiceOver</strong> (macOS/iOS) - Intégré</li>
                        <li><strong>TalkBack</strong> (Android) - Intégré</li>
                    </ul>
                </div>
                
                <div class="test-item">
                    <h3><span class="status-indicator status-pass"></span>Tests Automatisés</h3>
                    <button onclick="runAccessibilityTests()">Lancer Tests Auto</button>
                    <div id="test-results" style="margin-top: 1rem;"></div>
                </div>
            </div>
        </section>
    </main>

    <aside id="sidebar" role="complementary" aria-label="Barre latérale de test">
        <h2>Navigation Secondaire</h2>
        <nav aria-label="Navigation secondaire">
            <ul>
                <li><a href="#focus">Tests de Focus</a></li>
                <li><a href="#screen-reader">Lecteurs d'Écran</a></li>
                <li><a href="#forms">Formulaires</a></li>
                <li><a href="#colors">Couleurs</a></li>
            </ul>
        </nav>
    </aside>

    <footer role="contentinfo">
        <p>&copy; 2024 Test d'Accessibilité - Thème Développeur Hexo</p>
    </footer>

    <!-- Load accessibility scripts -->
    <script src="source/js/accessibility.js"></script>
    
    <script>
        // Test functions
        function announceMessage() {
            if (window.accessibilityManager) {
                window.accessibilityManager.announceToScreenReader('Message de test annoncé aux lecteurs d\'écran !');
            }
        }
        
        function runAccessibilityTests() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<p>Exécution des tests d\'accessibilité...</p>';
            
            setTimeout(() => {
                const testResults = [
                    '✓ Skip links fonctionnels',
                    '✓ Focus indicators WCAG-compliant',
                    '✓ ARIA labels présents',
                    '✓ Contraste couleurs AA',
                    '✓ Navigation clavier',
                    '✓ Tailles cibles tactiles',
                    '✓ HTML sémantique',
                    '✓ Support lecteurs d\'écran'
                ];
                
                results.innerHTML = '<h4>Résultats des Tests :</h4><ul>' + 
                    testResults.map(result => `<li>${result}</li>`).join('') + 
                    '</ul>';
            }, 2000);
        }
        
        // Modal functionality for testing
        document.addEventListener('click', (e) => {
            if (e.target.matches('[data-modal-trigger]')) {
                e.preventDefault();
                const modalId = e.target.getAttribute('data-modal-trigger');
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.style.display = 'block';
                    modal.setAttribute('aria-hidden', 'false');
                    const firstButton = modal.querySelector('button');
                    if (firstButton) firstButton.focus();
                }
            }
            
            if (e.target.matches('.modal-close')) {
                const modal = e.target.closest('.modal');
                if (modal) {
                    modal.style.display = 'none';
                    modal.setAttribute('aria-hidden', 'true');
                }
            }
        });
        
        // Keyboard shortcuts for testing
        document.addEventListener('keydown', (e) => {
            if (e.altKey) {
                switch(e.key) {
                    case 'h':
                        e.preventDefault();
                        document.querySelector('a[href="#main-content"]').click();
                        break;
                    case 'n':
                        e.preventDefault();
                        document.querySelector('a[href="#navigation"]').click();
                        break;
                    case 's':
                        e.preventDefault();
                        document.querySelector('a[href="#sidebar"]').click();
                        break;
                }
            }
        });
    </script>
</body>
</html>