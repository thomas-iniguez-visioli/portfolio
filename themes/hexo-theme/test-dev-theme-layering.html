<!DOCTYPE html>
<html lang="fr" class="dev-theme">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dev-Theme - Corrections de Superposition</title>

    <!-- CSS dans le bon ordre pour dev-theme -->
    <link rel="stylesheet" href="source/styles/reset.css">
    <link rel="stylesheet" href="source/styles/variables.css">
    <link rel="stylesheet" href="source/styles/layout-fixes.css">
    <link rel="stylesheet" href="source/styles/z-index-fix.css">
    <link rel="stylesheet" href="source/css/dev-theme-fixes.css">
    <link rel="stylesheet" href="source/styles/layout.css">
    <link rel="stylesheet" href="source/styles/header.css">
    <link rel="stylesheet" href="source/styles/sidebar.css">
    <link rel="stylesheet" href="source/styles/buttons.css">
    <link rel="stylesheet" href="source/styles/cards.css">

    <style>
        /* Styles de test spécifiques au dev-theme */
        .dev-test-section {
            padding: 2rem;
            margin: 1rem 0;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: #f8fafc;
        }

        .dev-test-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .dev-test-description {
            color: #64748b;
            margin-bottom: 1rem;
        }

        .dev-test-result {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 500;
            margin-top: 1rem;
        }

        .dev-test-pass {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .dev-test-fail {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .dev-debug-info {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.875rem;
            margin-top: 1rem;
        }

        /* Dev-theme specific test styles */
        .dev-theme-indicator {
            position: fixed;
            top: 10px;
            left: 10px;
            background: #2563eb;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
        }
    </style>
</head>

<body class="dev-layout modern-layout dev-theme-loaded debug-mode">
    <!-- Indicateur dev-theme -->
    <div class="dev-theme-indicator">DEV-THEME ACTIVE</div>

    <!-- Skip link pour test -->
    <a href="#main-content" class="dev-skip-link skip-link">Aller au contenu principal</a>

    <div class="dev-page-grid page-grid">
        <!-- Header de test dev-theme -->
        <header class="page-header dev-header">
            <div class="container">
                <div class="header-content">
                    <div class="header-brand">
                        <a href="#" class="brand-link">
                            <span class="brand-text">Dev-Theme Test</span>
                        </a>
                    </div>

                    <nav class="header-nav">
                        <button class="nav-toggle" aria-expanded="false" aria-controls="dev-nav-menu">
                            <span class="nav-toggle-icon"></span>
                            <span class="nav-toggle-icon"></span>
                            <span class="nav-toggle-icon"></span>
                        </button>

                        <ul class="nav-menu dev-nav-menu" id="dev-nav-menu">
                            <li class="nav-item">
                                <a href="#" class="nav-link dev-nav-link" aria-current="page">Accueil</a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link dev-nav-link">Projets</a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link dev-nav-link">Blog</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Contenu principal dev-theme -->
        <main class="dev-page-main page-main" role="main" id="main-content">
            <div class="dev-layout-container layout-with-sidebar">
                <!-- Sidebar dev-theme -->
                <aside class="dev-sidebar" id="dev-sidebar">
                    <div class="dev-sidebar-content">
                        <div class="dev-sidebar-section dev-profile">
                            <div class="dev-profile-header">
                                <div class="dev-profile-avatar">
                                    <span class="dev-profile-initial">DT</span>
                                    <div class="dev-profile-status"></div>
                                </div>
                                <div class="dev-profile-info">
                                    <h3 class="dev-profile-name">
                                        <a href="#" class="dev-profile-link">Dev Theme</a>
                                    </h3>
                                    <p class="dev-profile-title">Developer Theme</p>
                                </div>
                            </div>

                            <div class="dev-tech-stack">
                                <h4 class="dev-section-title">Tech Stack</h4>
                                <div class="dev-tech-badges">
                                    <span class="dev-tech-badge dev-tech-javascript" data-tech="JavaScript">JS</span>
                                    <span class="dev-tech-badge dev-tech-typescript" data-tech="TypeScript">TS</span>
                                    <span class="dev-tech-badge dev-tech-react" data-tech="React">React</span>
                                    <span class="dev-tech-badge dev-tech-node" data-tech="Node.js">Node</span>
                                </div>
                            </div>
                        </div>

                        <div class="dev-sidebar-section">
                            <h4 class="dev-section-title">Navigation</h4>
                            <ul class="dev-nav-list">
                                <li class="dev-nav-item">
                                    <a href="#" class="dev-nav-link active" data-nav="home">
                                        <span class="dev-nav-text">Accueil</span>
                                        <span class="dev-nav-shortcut">Ctrl+H</span>
                                    </a>
                                </li>
                                <li class="dev-nav-item">
                                    <a href="#" class="dev-nav-link" data-nav="articles">
                                        <span class="dev-nav-text">Articles</span>
                                        <span class="dev-nav-shortcut">Ctrl+P</span>
                                    </a>
                                </li>
                                <li class="dev-nav-item">
                                    <a href="#" class="dev-nav-link" data-nav="about">
                                        <span class="dev-nav-text">À propos</span>
                                        <span class="dev-nav-shortcut">Ctrl+A</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="dev-sidebar-section">
                            <h4 class="dev-section-title">Social</h4>
                            <div class="dev-social-links">
                                <a href="#" class="dev-social-link">
                                    <svg class="dev-social-icon" viewBox="0 0 24 24">
                                        <path
                                            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                                    </svg>
                                </a>
                                <a href="#" class="dev-social-link">
                                    <svg class="dev-social-icon" viewBox="0 0 24 24">
                                        <path
                                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Toggle mobile pour sidebar dev-theme -->
                <button class="dev-sidebar-toggle" aria-expanded="false">
                    <div class="dev-sidebar-toggle-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>

                <!-- Backdrop pour sidebar mobile dev-theme -->
                <div class="dev-sidebar-backdrop"></div>

                <!-- Contenu principal dev-theme -->
                <div class="dev-main-content main-content">
                    <div class="dev-container container">
                        <h1>Test Dev-Theme - Corrections de Superposition</h1>
                        <p>Cette page teste les corrections CSS spécifiques au dev-theme.</p>

                        <!-- Section de test 1: Dev-Theme Z-Index -->
                        <div class="dev-test-section">
                            <h2 class="dev-test-title">Test 1: Dev-Theme Z-Index</h2>
                            <p class="dev-test-description">Vérification des z-index spécifiques au dev-theme.</p>

                            <div id="dev-zindex-test-result" class="dev-test-result"></div>
                            <div id="dev-zindex-debug" class="dev-debug-info"></div>
                        </div>

                        <!-- Section de test 2: Dev-Theme Sidebar -->
                        <div class="dev-test-section">
                            <h2 class="dev-test-title">Test 2: Dev-Theme Sidebar</h2>
                            <p class="dev-test-description">Test du comportement de la sidebar dev-theme.</p>

                            <div id="dev-sidebar-test-result" class="dev-test-result"></div>
                            <div id="dev-sidebar-debug" class="dev-debug-info"></div>
                        </div>

                        <!-- Section de test 3: Dev-Theme Responsive -->
                        <div class="dev-test-section">
                            <h2 class="dev-test-title">Test 3: Dev-Theme Responsive</h2>
                            <p class="dev-test-description">Test du comportement responsive du dev-theme.</p>

                            <div id="dev-responsive-test-result" class="dev-test-result"></div>
                            <div id="dev-responsive-debug" class="dev-debug-info"></div>
                        </div>

                        <!-- Section de test 4: Dev-Theme Components -->
                        <div class="dev-test-section">
                            <h2 class="dev-test-title">Test 4: Dev-Theme Components</h2>
                            <p class="dev-test-description">Test des composants spécifiques au dev-theme.</p>

                            <div class="cards-grid">
                                <div class="card dev-card">
                                    <div class="card-content">
                                        <h3 class="card-title">Dev Card 1</h3>
                                        <p class="card-description">Carte dev-theme 1.</p>
                                    </div>
                                </div>
                                <div class="card dev-card">
                                    <div class="card-content">
                                        <h3 class="card-title">Dev Card 2</h3>
                                        <p class="card-description">Carte dev-theme 2.</p>
                                    </div>
                                </div>
                                <div class="card dev-card">
                                    <div class="card-content">
                                        <h3 class="card-title">Dev Card 3</h3>
                                        <p class="card-description">Carte dev-theme 3.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Boutons de test dev-theme -->
                        <div class="dev-test-section">
                            <h2 class="dev-test-title">Test 5: Dev-Theme Buttons</h2>
                            <p class="dev-test-description">Test des boutons dev-theme.</p>

                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-primary dev-btn">Dev Primary</button>
                                <button class="btn btn-secondary dev-btn">Dev Secondary</button>
                                <button class="btn btn-terminal dev-btn">Dev Terminal</button>
                                <button class="btn btn-ghost dev-btn">Dev Ghost</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de test dev-theme -->
    <div class="modal dev-modal" id="dev-test-modal" style="display: none;">
        <div class="modal-backdrop dev-modal-backdrop"></div>
        <div class="modal-container dev-modal-container">
            <div class="modal-header">
                <h3 class="modal-title">Dev-Theme Modal</h3>
                <button class="modal-close">×</button>
            </div>
            <div class="modal-content">
                <p>Cette modal teste le z-index du dev-theme.</p>
            </div>
        </div>
    </div>

    <!-- Scripts dev-theme -->
    <script src="source/js/dev-theme.js"></script>

    <script>
        // Tests spécifiques au dev-theme
        function testDevThemeZIndex() {
            const elements = {
                'Dev Header': document.querySelector('.dev-header, .page-header'),
                'Dev Sidebar': document.querySelector('.dev-sidebar, #dev-sidebar'),
                'Dev Sidebar Toggle': document.querySelector('.dev-sidebar-toggle'),
                'Dev Skip Link': document.querySelector('.dev-skip-link')
            };

            let results = [];
            let debugInfo = [];

            Object.entries(elements).forEach(([name, element]) => {
                if (element) {
                    const zIndex = window.getComputedStyle(element).zIndex;
                    const position = window.getComputedStyle(element).position;

                    results.push(`${name}: z-index ${zIndex}, position ${position}`);
                    debugInfo.push(`${name}: ${zIndex !== 'auto' && zIndex !== '0' ? '✓' : '✗'}`);
                }
            });

            document.getElementById('dev-zindex-test-result').innerHTML =
                debugInfo.filter(info => info.includes('✓')).length >= 2
                    ? '<span class="dev-test-pass">✓ Dev-Theme z-index OK</span>'
                    : '<span class="dev-test-fail">✗ Problème dev-theme z-index</span>';

            document.getElementById('dev-zindex-debug').innerHTML = results.join('<br>');
        }

        function testDevThemeSidebar() {
            const sidebar = document.querySelector('.dev-sidebar, #dev-sidebar');
            const toggle = document.querySelector('.dev-sidebar-toggle');
            const backdrop = document.querySelector('.dev-sidebar-backdrop');

            const results = [
                `Sidebar trouvée: ${sidebar ? '✓' : '✗'}`,
                `Toggle trouvé: ${toggle ? '✓' : '✗'}`,
                `Backdrop trouvé: ${backdrop ? '✓' : '✗'}`,
                `Dev-theme classe: ${document.body.classList.contains('dev-theme-loaded') ? '✓' : '✗'}`
            ];

            const allFound = sidebar && toggle && backdrop && document.body.classList.contains('dev-theme-loaded');

            document.getElementById('dev-sidebar-test-result').innerHTML =
                allFound
                    ? '<span class="dev-test-pass">✓ Dev-Theme sidebar OK</span>'
                    : '<span class="dev-test-fail">✗ Problème dev-theme sidebar</span>';

            document.getElementById('dev-sidebar-debug').innerHTML = results.join('<br>');
        }

        function testDevThemeResponsive() {
            const width = window.innerWidth;
            const sidebar = document.querySelector('.dev-sidebar, #dev-sidebar');
            const toggle = document.querySelector('.dev-sidebar-toggle');

            const sidebarPosition = window.getComputedStyle(sidebar).position;
            const toggleDisplay = window.getComputedStyle(toggle).display;

            let expected = '';
            let isCorrect = false;

            if (width <= 1023) {
                expected = 'Mobile: sidebar fixed, toggle visible';
                isCorrect = sidebarPosition === 'fixed' && toggleDisplay !== 'none';
            } else {
                expected = 'Desktop: sidebar sticky, toggle hidden';
                isCorrect = sidebarPosition === 'sticky' && toggleDisplay === 'none';
            }

            const results = [
                `Largeur: ${width}px`,
                `Sidebar position: ${sidebarPosition}`,
                `Toggle display: ${toggleDisplay}`,
                `Attendu: ${expected}`,
                `DevTheme disponible: ${window.DevTheme ? '✓' : '✗'}`
            ];

            document.getElementById('dev-responsive-test-result').innerHTML =
                isCorrect
                    ? '<span class="dev-test-pass">✓ Dev-Theme responsive OK</span>'
                    : '<span class="dev-test-fail">✗ Problème dev-theme responsive</span>';

            document.getElementById('dev-responsive-debug').innerHTML = results.join('<br>');
        }

        // Initialisation des tests dev-theme
        document.addEventListener('DOMContentLoaded', () => {
            // Attendre que DevTheme soit initialisé
            setTimeout(() => {
                testDevThemeZIndex();
                testDevThemeSidebar();
                testDevThemeResponsive();

                // Re-tester lors du redimensionnement
                window.addEventListener('resize', () => {
                    setTimeout(testDevThemeResponsive, 100);
                });

                console.log('🧪 Tests dev-theme terminés');
                console.log('DevTheme object:', window.DevTheme);
            }, 500);
        });

        // Fonction de debug dev-theme
        function showDevThemeDebug() {
            console.log('=== DEV-THEME DEBUG ===');
            console.log('DevTheme object:', window.DevTheme);
            console.log('Body classes:', document.body.classList.toString());
            console.log('CSS Variables:', {
                zIndexSticky: getComputedStyle(document.documentElement).getPropertyValue('--z-index-sticky'),
                zIndexModal: getComputedStyle(document.documentElement).getPropertyValue('--z-index-modal'),
                zIndexDocked: getComputedStyle(document.documentElement).getPropertyValue('--z-index-docked')
            });

            if (window.DevTheme) {
                console.log('Fixing layering issues...');
                window.DevTheme.fixLayering();
            }
        }

        // Exposer la fonction de debug
        window.showDevThemeDebug = showDevThemeDebug;
    </script>

    <div style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
        <button onclick="showDevThemeDebug()"
            style="background: #2563eb; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; margin-right: 10px;">
            Dev-Theme Debug
        </button>
        <button onclick="document.getElementById('dev-test-modal').style.display='flex'"
            style="background: #059669; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
            Test Modal
        </button>
    </div>
</body>

</html>